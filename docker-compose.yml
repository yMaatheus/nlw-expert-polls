version: '3.8'

services:
  nlw-expert-api:
    container_name: nlw-expert-api
    build: .
    tty: true # docker run -t
    stdin_open: true # docker run -i
    restart: always
    ports:
      - ${APP_PUBLIC_PORT}:${APP_PORT}
    environment:
      - DATABASE_URL=postgresql://${PG_USER}:${PG_PASSWORD}@${PG_HOST}:${PG_PORT}/${PG_DB}?schema=public
      - REDIS_HOST=${REDIS_HOST}
      - REDIS_PORT=${REDIS_PORT}
      - REDIS_PASSWORD=${REDIS_PASSWORD}
      - origin=${CORS_ORIGIN}
      - HOST=${APP_HOST}
      - PORT=${APP_PORT}
    networks:
      - databases-network

networks:
  databases-network:
    external: true